面向对象的基本原则(solid)是五个，但是在经常被提到的除了这五个之外还有迪米特法则和合成复用原则等， 所以在常见的文章中有表示写六大或七大原则的。

# 单一职责原则(SRP)

**不要存在多于一个导致类变更的原因。通俗的说，即一个类只负责一项职责。**

这里的一个引起变化的原因，基本指的是同一类操作，同一个行为的系列操作，那么就可以放在一个类中。

假设我们定义一个 Camera 照相机接口，最开始时只有拍照功能，里面只包含 photo() 和 save() 方法，这时我们可以将拍照和保存都看成同一系列的操作。

现在我们需要增加一个录像功能，这个时候一个接口就不行了，因为一个接口不能同时有拍照、保存和录像、保存两个系列的操作，这时就需要将之拆分为两个接口，一个拍接口，里面包含拍照和录像，一个保存接口，保存照片和保存录像。

一个职责一个功能，被拆分成更加具体的多个操作了，从最开始仅仅是拍照，后面增加了录像，被细分为更细的操作之后，就要考虑将之独立为更具体的接口。

但是也不要盲目的拆分，很多时候都需要违反单一职责原则，盲目的拆分也会使得类变多，花销变大，还是要根据实际情况来决定，有的时候新增一个方法来处理细分的职责，或者将原本的方法里面加一个判断条件(如前面的功能，判断是拍照还是录像，执行不同功能)即可，反而花销更小。

一般来讲，这样来抉择：

- 逻辑足够简单的话，可以在代码里面添加判断，违反单一职责原则。
- 类中方法足够少，可以添加方法来细化，违反单一职责原则。

但是大多数情况下，一个类都有特别多的方法，所以还是遵循单一职责原则拆分为好。

单一职责的优点：

- 降低复杂度(不是耦合度)，一个类只负责一个职责，这个类肯定逻辑更加简单。
- 变更需求时，最大程度的降低对其它功能的影响。

也就是代码逻辑更简单，同时降低最其它功能的影响。

# 里氏替换原则(LSP)

**子类可以扩展父类的功能，但不能改变父类原有的功能。**

也就是使用继承的时候，最好不要去重写父类的方法，既然你要重写，那何必继承呢，使用依赖、聚合或组合两个类不是更好吗？

有下面几个具体的含义：

- 子类可以去实现父类的抽象方法，但是不要覆盖父类的非抽象方法。(也就是重写，重写是违反LSP原则的)
- 子类可以增加自己特有的方法。
- 子类重载父类方法时，方法的前置条件(形参)要比父类更宽松(范围更大)。这条规则仅仅是用于符合里氏替换原则，如果子类参数范围更小，当参数更小时，就不会执行父类方法了，父类方法就没用了。
- 重写或者实现父类方法的时候，方法的返回值可以被缩小，但是不能放大

# 依赖倒转原则(DIP)

高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象。即针对接口编程，不要针对实现编程。

当一个类(A)需要依赖另外一个类(B)的时候，最好不要直接依赖这个类(B)，而是直接依赖这个类(B)的抽象(接口或者抽象类)，同时这个类(A)调用依赖类时也是直接调用抽象，而不是具体的类，这就是依赖倒转原则。

这样做的好处是，当A类需要依赖另外一个类C时，不需要修改代码，因为代码里面依赖的是上层的抽象，只需要这个类C，实现这个抽象即可，在使用时，传入具体的类对象时，传入真正需要的对象是B类对象还是C类对象就可以区分。

# 接口隔离原则(ISP)

这个原则非常简单，就是不要要求客户端去依赖它们不用的接口，接口中很多方法客户端用不着，就不应该依赖这个接口，应该依赖更小更细化的接口，否则的话，实现起来就麻烦了，很多功能用不着却又要实现。

这个看起来和单一职责有点关联，不过单一职责指的是一个类只负责一项职责，但是 ISP 有可能并不是依赖一项操作，只要用得着，都有可能依赖。

# 开闭原则(OCP)

**软件实体（包括类、模块、功能等）应该对扩展开放，但是对修改关闭。**

当我们需要添加新需求的时候，应该尽可能使用扩展的方式，也就是面向接口编程，需要符合依赖倒转原则，新增加一个实现类去实现新需求，而不是直接修改之前的模块，之前的代码有可能是以前的员工开发的，修改就会增加错误的可能性。

通过扩展去应对需求变化，就要求我们必须要面向接口编程，或者说面向抽象编程。所有参数类型、引用传递的对象必须使用抽象（接口或者抽象类）的方式定义，不能使用实现类的方式定义。

通过抽象去界定扩展，比如我们定义了一个接口A的参数，那么我们的扩展只能是接口A的实现类。

**总的来说，开闭原则提高系统的可维护性和代码的重用性。**

# 迪米特原则(LOD)

简单来说就是，一个类/模块对其他的类/模块有越少的交互越好。当一个类发生改动，那么，与其相关的类（比如用到此类啥方法的类）需要尽可能少的受影响（比如修改了方法名、字段名等，可能其他用到这些方法或是字段的类也需要跟着修改）这样我们在维护项目的时候会更加轻松一些。

**也就是说，能不交互最好不要和其它类有接触**

举例说明，一个类A需要使用另外一个类B的获取IP地址方法，更好的做法是，在类B中直接调用获取IP地址方法之后，然后将返回的IP地址直接传给类A，而不是将类B整个传给类A，应该保证交互尽可能的少。

# 合成复用原则(CRP)

优先使用对象组合，而不是通过继承来达到复用的目的。

如果使用继承，会导致父类的任何变换都可能影响到子类的行为。如果使用对象组合，就降低了这种依赖关系。对于继承和组合，优先使用组合。

如果我们需要使用一个功能，这个功能之前已经被其它类实现了，最好的方法是将这个类的实例化对象添加到当前类成为一部分，而不是去继承它，因为我们只是使用一个功能而已，这样可以最大程度的降低耦合度。

同时可以将这个功能添加为新对象的一个成员属性，也可以直接传递给新对象作为一个这个对象的方法参数。