---
创建时间: 2023-03-14T18:54
更新时间: 2023-11-28T12:08
---
目前使用的是崔效瑞的vim插件 `cvim`，集成了 flash 搜索
## 移动
### 插入模式
- 上下左右：`control + hjkl`
- 包含前后空白和空格等行首行尾：`control + command + hl`
- 顶部和尾部：`control + command + jk`

### 基于行
- 上下左右：`hjkl`
- 仅代码行首行尾：改键`H、L`

### 基于全文
- 顶部和尾部：`control + command + jk`
- 上下5行：`J、K`
- 跳到文件首：`gg`
- 跳到文件尾：`G`
- 跳到指定行：`55gg或55G`
- 把当前行置于屏幕中央：`zz`
- 往下滚动一屏：`ctrl + f`
- 往上滚动一屏：`ctrl + b`

### 基于字词/字串
- 下一个单词的首位：`w`，`W`会同时匹配单词里面的符号，比如 `hello-word`
- 下一个单词的末位：`e`, `E`同上
  - 常见命令：ea，单词尾然后插入

- 上一个单词的首位：`b`, `B` 同上，常用于 `ciB`匹配整个`{}`里面的内容
- 上一个单词的末位：`ge`

### 基于搜索
**vim-sneak插件**(弃用)
- 往后搜索：`f`
- 往前搜索：`F`
- 光标后，重复搜索上次的字符：`;`
- 光标前：`,`，目前没有效果，有空研究

**flash插件**
- 开始搜索：`f`，默认f，记得关闭配置中关于f映射为s的映射(以前用f作为sneak(默认开启是s)的按键)，因为s键改为当前位置删除并插入了

**easymotion移动插件**
基于单词移动(同单词匹配)：
- \<leader\> + w：默认快捷键\<leader\>\<leader\> + w，修改了映射，弃用
- +b：上一个单词开头，修改了映射，弃用，使用flash代替
- +j： 匹配行首
- +k：匹配下面的行首

**全局搜索**：
- /：向后查，如：`/abc`，然后按回车
- ?：向前查
- n/N：上/下一个查找结果
- `#`：向上查找，查找当前光标下附近的函数名、变量，按一下#，就可以跳转到同名的位置上
- `*`：向下查找，注意搜索到注释中的同名，就会暂停住，无法继续搜索了
- `%`：切换配对符号位置，比如`{`上按一下会跳转到配对的`}`

**最佳方案**
- 跳转到行首：使用easymotion、j、k，分别为上下的行首
- 当前屏幕任意位置：flash
- 所有位置：自带搜索/
- 单词头尾：easymotion

### 基于跳转移动
#### 定位标记
标记位置，然后跳转到该标记点。
- 单文件标记：m+小写字母，推荐常用`mm`
- 多文件标记：m+大写字母，推荐常用`mM`

- 跳转位置：使用 `'`进行跳转

#### 跳转到函数、变量定义位置
跳转函数定义：`gd`多文件定义位置均可跳转
跳转函数定义：在函数定义位置想要找到具体调用的位置，则只需要使用上面的 `#`和 `*`即可
如果定义有多个位置，会弹出一个选择框：
- 使用`jk`即可进行上下选择和预览
- 使用`l`进行确认选择
- 使用`h`打开折叠框，`l`同时也是关闭折叠框

#### 通用跳转
这个是vim自带的，所有的vim包括obsidian里面的都自带，可以保存的信息更加通用和齐全
- 向后跳：`ctrl + i`
- 向前跳：`ctrl + o`

## 范围选中
### 文本对象
- 范围控制符号：
  - 内部：i
  - 外部：a，如果是()，就会包括()

- 匹配一个单词：`w`
- 匹配括号：()、[]、{}、<>
- 匹配分号：''、""、``
- vim-textobj-arguments参数插件：`a`
  - ia：不包含参数后面,逗号
  - aa：包含，
  - daa：删除一个参数
  - cia：修改一个参数
- 选中import参数：同上
- vim-textobj-entire：`e`
  - ae：全屏所有文本
  - ie：所有文本不包括前后空格
- 选择当前位置的这个单词：`gb`，多次按下选中多个这个单词
- XML标签内部：`t`，将删除`<div>xxx</div>` 标签中的内容
- vim-surround插件:
  - 替换包裹符号：c+s+当前包裹符号+替换的符号，举例：cs"',表示把双引号变成单引号
  - 增加包裹符号：y+s+选中区域+包裹符号，举例：ysiw(，表示将当前iw选中的单词加上括号
  - 删除包裹符号：d+s+包裹符号，举例：ds(，表示把当前包裹的括号删除
  - 可视模式添加包裹符号：S+包裹符号，当前提前需要v进入可视模式并选取好需要添加符号的内容


### 可视模式

- 字符：v
- 行：V
- 块：ctrl + v，选中不同行的相同位置，**可以用于统一修改**。
- 多个位置统一修改需要按`大写A和I`
- 切换可视区光标位置：`o`
- 重新回到上一次选择的区域：`gv`

## 编辑命令

### 增删改

- 光标前插入：`i`，行首：`I`

- 光标后插入：`a`，行尾：`A`

- 行前插入：`O`，行后行后：`o`

- 复制：`y`
  - 复制当前行：`yy`
  - 配合V，可视模式多选然后再按y复制
  
- 粘贴：`p`

- 删除范围字符：`d`
  - 删除当前行：`dd`，`d3d`：删除3行
  
- 删除范围字符并插入：`c`，按下c之后必须添加范围字符

- 删除光标字符：`x`，光标前一个字符：`X`

- 删除当前光标并插入：`s`，删除光标所在行并插入：`S`

- 替换光标字符：`r`，替换多个字符：`R`

- undo/redo：
  - 撤销可撤销块中的操作：u
  - 重做可撤销块：ctrl + r
  
- 多次粘贴：`"0p`
  
  - 比如使用 `ygb`或者 `yiw`选中当前词语之后，如果选中一个词语再粘贴 `gbp` 或者 `viwp`
  
  - 那么被粘贴替换的这个词语会存放到寄存器，如果想再次粘贴，寄存器最前的就变了，无法多次粘贴了
  
  - 所以需要使用 `"0p`表示粘贴第二个，第一个是默认匿名寄存器，其余的都得通过加index来获取
  
  - 使用 `:reg` 可以查看寄存器中的内容
  
  - ```json
    // 已经通过映射，将p直接设置为每次获取寄存器0
    { "before": ["p"], "after": ["\"", "0", "p"] },
    ```
  

### 数字操作

- `d10d`

### 点操作符

重复上次操作，常见操作如下：

- diw点点点：
- 末尾加分号：a;点点点
- 查找手动替换(在处理一部分需要替换一部分不需要时有用)：
 - 首先/abc回车，查找abc
  - ciw，删除并修改，然后esc退出
 - 按下n，查找下一个abc
  - 移动到需要修改的，按下点修改，不需要改的就不动

### 替换字符串

- `:%s/hello/nihao/g`：全文匹配hello替换为nihao

- 首先选中需要的范围 `:'<,'>s/hello/nihao/g`

### 删除函数

使用命令`i`

- ii：匹配一个大括号内的内容
- ai：匹配包括大括号外函数名的内容

- 函数名上删除：`<leader>  d  f`

### 调用vscode命令

- 格式化文档：`<leader>  f`
- 重命名函数、变量名：`<leader> r n`
- 折叠函数：`<leader>  [`
- 全部折叠：`<leader>  [`

### 其它操作

- 悬浮显示： `gh`

转换大小写：

- 正常模式下：`guiw`
- 可视化模式下：先选中，然后按u小写，U大写

### 注释

- 单行注释：gc，然后按l或者h注释当前行，按jk同时注释上下两行
- 多行注释：gC，按完之后注释制定的范围，如gCiw表示注释一个词，gCG表示注释到末尾
- 可视化模式是先选中再按下这两个按键即可

## 窗口管理

### 结合vscode的快捷键

- 新建窗口
 - command + \：原生左右新建窗口
  - command + ctrl + \：原生没有上下新建窗口
- 关闭窗口
  - command + w：关闭当前窗口
  - command + k 然后按w：关闭所有窗口
- 窗口切换
  - shift+方向键：需要进行配置keybindings.json

## 宏的使用

首先需要录制一段宏：

- 按下q+宏名：如`qq`
- 然后输入各种命令，比如`diwl`
- 再按`q`，结束录制

使用宏时：

- `@q`：执行一次宏，多次可以使用 `10@q`
- `@@`：执行最后一次执行的宏

- 安全机制：当使用`100@q`，没有100次会提前停止
